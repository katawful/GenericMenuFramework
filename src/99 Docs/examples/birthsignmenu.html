<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birthsign Menu Recreation &mdash; GenericMenuFramework 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Example Generic Menus" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            GenericMenuFramework
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../xml/index.html">UI Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xml/index.html#xml-reference">XML Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">GenericMenuFramework Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Example Generic Menus</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Birthsign Menu Recreation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#menu-root">Menu Root</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#menu-tile">Menu Tile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rect-tile">Rect Tile</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementing-the-prefab">Implementing the Prefab</a></li>
<li class="toctree-l4"><a class="reference internal" href="#displaying-current-birthsign">Displaying Current Birthsign</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-list">Creating A List</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bmr-info-box"><code class="docutils literal notranslate"><span class="pre">bmr_info_box</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#bmr-list-template"><code class="docutils literal notranslate"><span class="pre">bmr_list_template</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#scripting-the-list">Scripting the List</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scrolling-a-list">Scrolling A List</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#quest-script">Quest Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-id-array">Adding ID Array</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setting-birthsign">Setting Birthsign</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#editorids-formids">EditorIDs &amp; FormIDs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-store-forms">How to Store Forms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#finishing-up">Finishing Up</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GenericMenuFramework</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Example Generic Menus</a></li>
      <li class="breadcrumb-item active">Birthsign Menu Recreation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/birthsignmenu.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="birthsign-menu-recreation">
<h1>Birthsign Menu Recreation<a class="headerlink" href="#birthsign-menu-recreation" title="Permalink to this heading"></a></h1>
<p>This is a simple recreation of the vanilla birthsign menu. This shows off 3 features:
lists/scrolling, clicking buttons, and manipulating menu/game states in real time.</p>
<p>The important thing to ask when creating a new menu is “what do we need?” For this menu, we will
need:</p>
<ul class="simple">
<li><p>List of birthsigns</p></li>
<li><p>Image of current birthsign</p></li>
<li><p>Set player’s birthsign</p></li>
<li><p>Title for current birthsign</p></li>
</ul>
<p>This is not a lot of aspects, which makes for a pretty simple menu to implement. For simplicity, I
axed the description of the current birthsign. Since all aspects of interactivity are based around
the list of the birthsign, it should be the first thing we need to build.</p>
<section id="menu-root">
<h2>Menu Root<a class="headerlink" href="#menu-root" title="Permalink to this heading"></a></h2>
<p>Before we can display a list, we need to have the structure of a menu to put it into. Generally,
this is referred to as the “menu root”, the primary ancestor for all parts of this specific menu.</p>
<p>Since we are only creating a single generic menu, we only need a single XML document. We will create
the file <code class="docutils literal notranslate"><span class="pre">Data\Menus\Generic\Kat\BirthsignRemake.xml</span></code>.</p>
<p>The first thing we need, thus, is the <code class="docutils literal notranslate"><span class="pre">menu</span></code> tile.</p>
<section id="menu-tile">
<h3>Menu Tile<a class="headerlink" href="#menu-tile" title="Permalink to this heading"></a></h3>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- birthsign.xml --&gt;</span>
<span class="nt">&lt;menu</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;BirthsignRemake&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;class&gt;</span><span class="w"> </span><span class="ni">&amp;GenericMenu;</span><span class="w"> </span><span class="nt">&lt;/class&gt;</span>
<span class="w">        </span><span class="nt">&lt;stackingtype&gt;</span><span class="w"> </span><span class="ni">&amp;no_click_past;</span><span class="w"> </span><span class="nt">&lt;/stackingtype&gt;</span>
<span class="w">        </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">        </span><span class="nt">&lt;explorefade&gt;</span><span class="w"> </span>0.25<span class="w"> </span><span class="nt">&lt;/explorefade&gt;</span>
<span class="nt">&lt;/menu&gt;</span>
</pre></div>
</div>
<p>It is useful to add a comment of the file name, but it is not required.</p>
<p>The main trait needed is the <code class="docutils literal notranslate"><span class="pre">class</span></code> trait. This tells Oblivion that this is a generic menu, and
is required for any generic menu. The <code class="docutils literal notranslate"><span class="pre">stackingtype</span></code> trait is also needed, but is undocumented
behavior. <code class="docutils literal notranslate"><span class="pre">locus</span></code> is good to use here, it will easily center the menu to the center of the screen,
and will be the locus for the rest of the document. <code class="docutils literal notranslate"><span class="pre">explorefade</span></code> is simply how long we want the
menu to take to fade in. 0.25 is a vanilla value.</p>
<p>We don’t need anything more to get this tile working, but nothing will actually render with this
document yet. Lets add a basic <code class="docutils literal notranslate"><span class="pre">rect</span></code> to do so.</p>
</section>
<section id="rect-tile">
<h3>Rect Tile<a class="headerlink" href="#rect-tile" title="Permalink to this heading"></a></h3>
<p>As this is a simple menu, we only need one main rect tile. However, there’s a bit of a design
dilemma here. We want a menu that looks good, but how do we actually achieve that? We can use
<a class="reference internal" href="../xml/index.html#prefabdocuments"><span class="std std-ref">prefab documents</span></a> to achieve this. If you look inside the
<code class="docutils literal notranslate"><span class="pre">Data\Menus\Prefabs</span></code> folder inside <code class="docutils literal notranslate"><span class="pre">Oblivion</span> <span class="pre">-</span> <span class="pre">Misc.bsa</span></code>, we can see a collection of XML
documents with specific functions. If you peruse through these documents, you can see how they’re
generally built (using user traits). UI mods also provide their own prefab documents as needed. For
now, we just want a basic background, so for that we will used <code class="docutils literal notranslate"><span class="pre">generic_background.xml</span></code>. Lets take
a look at this prefab real quick.</p>
<section id="generic-background-xml">
<h4>generic_background.xml<a class="headerlink" href="#generic-background-xml" title="Permalink to this heading"></a></h4>
<p>When working with prefabs, we want to work with what the prefab is designed to be worked with. That
means using user traits and underscore-prefixed traits only. Let’s see what this prefab has:</p>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--</span>
<span class="cm">*** IMPORTANT ***</span>
<span class="cm">To set the width and height, use user0 and user1.  This is because the border</span>
<span class="cm">is built around the passed-in values.</span>
<span class="cm">--&gt;</span>
<span class="nt">&lt;user0&gt;</span><span class="w"> </span>800<span class="w"> </span><span class="nt">&lt;/user0&gt;</span><span class="w"> </span><span class="cm">&lt;!-- menu width --&gt;</span>
<span class="nt">&lt;user1&gt;</span><span class="w"> </span>500<span class="w"> </span><span class="nt">&lt;/user1&gt;</span><span class="w"> </span><span class="cm">&lt;!-- menu height --&gt;</span>

<span class="nt">&lt;width&gt;</span>
<span class="w">       </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;_rounded_width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/width&gt;</span>
<span class="nt">&lt;height&gt;</span>
<span class="w">       </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;_rounded_height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/height&gt;</span>

<span class="nt">&lt;_tile_size&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/_tile_size&gt;</span><span class="w">                 </span><span class="cm">&lt;!-- repeating length of border elements --&gt;</span>
<span class="nt">&lt;_border_thickness&gt;</span><span class="w"> </span>44<span class="w"> </span><span class="nt">&lt;/_border_thickness&gt;</span><span class="w">  </span><span class="cm">&lt;!-- thickness of border elements --&gt;</span>

<span class="nt">&lt;_rounded_width&gt;</span>
<span class="w">       </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">       </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;_tile_size&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">       </span><span class="nt">&lt;ceil&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/ceil&gt;</span>
<span class="w">       </span><span class="nt">&lt;mul</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;_tile_size&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/_rounded_width&gt;</span>
<span class="nt">&lt;_rounded_height&gt;</span>
<span class="w">       </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">       </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;_tile_size&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">       </span><span class="nt">&lt;ceil&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/ceil&gt;</span>
<span class="w">       </span><span class="nt">&lt;mul</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;_tile_size&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/_rounded_height&gt;</span>
</pre></div>
</div>
<p>The traits with float values are the only ones we want to touch. These are <em>designed</em> to be touched
by the author of this prefab. The 4 traits in this case are: <code class="docutils literal notranslate"><span class="pre">user0</span></code>, <code class="docutils literal notranslate"><span class="pre">user1</span></code>, <code class="docutils literal notranslate"><span class="pre">_tile_size</span></code>,
and <code class="docutils literal notranslate"><span class="pre">_border_thickness</span></code>. <code class="docutils literal notranslate"><span class="pre">user0</span></code> is the width of the menu, while <code class="docutils literal notranslate"><span class="pre">user1</span></code> will be the height.
The other 2 traits are pretty self-explanatory.</p>
</section>
</section>
<section id="implementing-the-prefab">
<h3>Implementing the Prefab<a class="headerlink" href="#implementing-the-prefab" title="Permalink to this heading"></a></h3>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_background&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;generic_background.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">    </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>100<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">    </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">    </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">    </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">            </span><span class="nt">&lt;user0&gt;</span><span class="w"> </span>800<span class="w"> </span><span class="nt">&lt;/user0&gt;</span>
<span class="w">            </span><span class="nt">&lt;user1&gt;</span><span class="w"> </span>500<span class="w"> </span><span class="nt">&lt;/user1&gt;</span>
<span class="w">    </span><span class="nt">&lt;x&gt;</span>
<span class="w">        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;screen()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;/x&gt;</span>
<span class="w">    </span><span class="nt">&lt;y&gt;</span>
<span class="w">        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;screen()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;/y&gt;</span>
<span class="nt">&lt;/rect&gt;</span>
</pre></div>
</div>
<p>For the <code class="docutils literal notranslate"><span class="pre">x</span></code>  and the <code class="docutils literal notranslate"><span class="pre">y</span></code> positions, we can use <a class="reference internal" href="../xml/index.html#selectors"><span class="std std-ref">selectors</span></a> to grab screen data
and the current width and height of the menu to automatically center the menu. Selectors require a
source trait to copy from. Since <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> position are the leftmost and topmost pixels of the
tiles, we need this position to be centerable. Simply dividing the screen dimensions in half will
not do, as that would imply that <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> positions are based on the <em>center</em> of the tile. To
get around this, we subtract out the dimensions of the tile. This essentially shifts the “center” of
the tile up and to the left, allowing it to appear centered in the screen.</p>
<p>Since we don’t have any other tile or functionality, we can just have leave this as is. We can even
render this tile. So lets fire up Construction Set Extender. For our own simplicity, we will simply
launch a menu with a button, so let us create a cell with a button it:</p>
<figure class="align-center" id="id1">
<img alt="../_images/birthsign-cell-view.jpg" src="../_images/birthsign-cell-view.jpg" />
<figcaption>
<p><span class="caption-text">As this is a test, we don’t need much complication here. An activator is a quick way to test our
menu out.</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>It is useful to handle large functionality in object scripts with a user-defined function, so for
the button’s script we simply call a main menu function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRActivator</span>
<span class="n">Begin</span> <span class="n">OnActivate</span>
        <span class="n">Call</span> <span class="n">BMRFunction</span>
<span class="n">End</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRFunction</span>
<span class="n">Begin</span> <span class="n">Function</span><span class="p">{}</span>
        <span class="p">;;</span> <span class="n">Create</span> <span class="n">menu</span> <span class="n">using</span> <span class="n">GMF</span>
        <span class="n">Call</span> <span class="n">GMFShowMenu</span> <span class="s2">&quot;kat</span><span class="se">\b</span><span class="s2">irthsignremake.xml&quot;</span> <span class="mi">0</span>
<span class="n">End</span>
</pre></div>
</div>
<p>Saving these scripts, and setting our button’s object script to <code class="docutils literal notranslate"><span class="pre">BMRActivator</span></code>, when we <code class="docutils literal notranslate"><span class="pre">coc</span>
<span class="pre">BMRCell</span></code> in game, we should have a functioning menu:</p>
<figure class="align-center" id="id2">
<img alt="../_images/birthsign-root-rect.jpg" src="../_images/birthsign-root-rect.jpg" />
<figcaption>
<p><span class="caption-text">Notice that despite the 1920x1080 image, the 800x500 menu does not scale accurately. This is a
side effect of UI rendering based on its internal parameters.</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Congrats! You have created a generic menu. Now we need to fill out all the details.</p>
</section>
<section id="displaying-current-birthsign">
<h3>Displaying Current Birthsign<a class="headerlink" href="#displaying-current-birthsign" title="Permalink to this heading"></a></h3>
<p>Looking back to our list of features, lets work out what depends on what.</p>
<ul class="simple">
<li><p>List of birthsigns</p></li>
<li><p>Image of current birthsign</p></li>
<li><p>Set player’s birthsign</p></li>
<li><p>Title for current birthsign</p></li>
</ul>
<p>The list of birthsigns is pretty independent. The image and title of the current birthsign only
depends upon the player’s birthsign. Setting the player’s birthsign depends upon the list. Since the
image and title is dependent upon the player’s current status, we can start there.</p>
<p>We would need 2 tiles for the title and image:</p>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- birthsign.xml --&gt;</span>
<span class="nt">&lt;menu</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;BirthsignRemake&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;class&gt;</span><span class="w"> </span><span class="ni">&amp;GenericMenu;</span><span class="w"> </span><span class="nt">&lt;/class&gt;</span>
<span class="w">        </span><span class="nt">&lt;stackingtype&gt;</span><span class="w"> </span><span class="ni">&amp;no_click_past;</span>
<span class="w">        </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">        </span><span class="nt">&lt;explorefade&gt;</span><span class="w"> </span>0.25<span class="w"> </span><span class="nt">&lt;/explorefade&gt;</span>

<span class="w">        </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_background&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;generic_background.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">                </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>100<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                </span><span class="nt">&lt;user0&gt;</span><span class="w"> </span>800<span class="w"> </span><span class="nt">&lt;/user0&gt;</span>
<span class="w">                </span><span class="nt">&lt;user1&gt;</span><span class="w"> </span>500<span class="w"> </span><span class="nt">&lt;/user1&gt;</span>
<span class="w">                </span><span class="nt">&lt;user0&gt;</span>
<span class="w">                        </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>10<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                </span><span class="nt">&lt;/user0&gt;</span>
<span class="w">                </span><span class="nt">&lt;user1&gt;</span>
<span class="w">                        </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>10<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                </span><span class="nt">&lt;/user1&gt;</span>
<span class="w">                </span><span class="nt">&lt;x&gt;</span>
<span class="w">                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;screen()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">                </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                </span><span class="nt">&lt;y&gt;</span>
<span class="w">                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;screen()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">                </span><span class="nt">&lt;/y&gt;</span>

<span class="w">                </span><span class="nt">&lt;image</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                        </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                        </span><span class="nt">&lt;filename&gt;</span><span class="w"> </span>Menus\Birthsign\Birthsign_The<span class="w"> </span>Warrior.dds<span class="w"> </span><span class="nt">&lt;/filename&gt;</span>
<span class="w">                        </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>110<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                        </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                        </span><span class="nt">&lt;zoom&gt;</span><span class="w"> </span><span class="ni">&amp;scale;</span><span class="w"> </span><span class="nt">&lt;/zoom&gt;</span>
<span class="w">                        </span><span class="nt">&lt;height&gt;</span><span class="w"> </span>256<span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="w">                        </span><span class="nt">&lt;width&gt;</span><span class="w"> </span>256<span class="w"> </span><span class="nt">&lt;/width&gt;</span>
<span class="w">                        </span><span class="nt">&lt;x&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                        </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>60<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="w">                </span><span class="nt">&lt;/image&gt;</span>

<span class="w">                </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_class_name&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>111<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                        </span><span class="nt">&lt;string&gt;</span><span class="w"> </span>Current<span class="w"> </span>class:<span class="w"> </span>The<span class="w"> </span>Warrior<span class="w"> </span><span class="nt">&lt;/string&gt;</span>
<span class="w">                        </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                        </span><span class="nt">&lt;font&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/font&gt;</span>
<span class="w">                        </span><span class="nt">&lt;red&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/red&gt;</span>
<span class="w">                        </span><span class="nt">&lt;green&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/green&gt;</span>
<span class="w">                        </span><span class="nt">&lt;blue&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/blue&gt;</span>
<span class="w">                        </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>200<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">                        </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">                        </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                </span><span class="nt">&lt;/text&gt;</span>

<span class="w">        </span><span class="nt">&lt;/rect&gt;</span>
<span class="nt">&lt;/menu&gt;</span>
</pre></div>
</div>
<p>There’s, a lot, going on here.</p>
<section id="image-tile">
<h4>Image Tile<a class="headerlink" href="#image-tile" title="Permalink to this heading"></a></h4>
<p>The image tile <code class="docutils literal notranslate"><span class="pre">bmr_background_image</span></code> is where we are going to render out the current class image.
As this is an image tile, we need to be very specific as to how this gets render.</p>
<p>First, we use a fallback image for the <code class="docutils literal notranslate"><span class="pre">filename</span></code> trait, in this case just the Warrior birthsign
image.</p>
<p>Second, since we are using images with all the same sizes, the zoom value becomes less of a concern.
For birthsigns, all the texture sizes are <code class="docutils literal notranslate"><span class="pre">512x512</span></code>, which is clearly too big for our desired menu
(less than <code class="docutils literal notranslate"><span class="pre">800x500</span></code>). However, a feature of the <code class="docutils literal notranslate"><span class="pre">zoom</span></code> trait is that it can take the
<code class="docutils literal notranslate"><span class="pre">&amp;scale;</span></code> entity in which the zoom value will be automatically adjusted to fit the confines of the
height and width of the tile.</p>
<p>Third, we need to actually define the confines of the texture. As <code class="docutils literal notranslate"><span class="pre">512x512</span></code> was simply too big,
<code class="docutils literal notranslate"><span class="pre">256x256</span></code> will suffice.</p>
</section>
<section id="text-tile">
<h4>Text Tile<a class="headerlink" href="#text-tile" title="Permalink to this heading"></a></h4>
<p>This tile is a bit simpler, as it is just a text tile. Since we can’t set the <code class="docutils literal notranslate"><span class="pre">width</span></code>  and
<code class="docutils literal notranslate"><span class="pre">height</span></code> traits, we will use fonts for the specific sizes we want. We can see the system possible
fonts within <code class="docutils literal notranslate"><span class="pre">Oblivion.ini</span></code>. For example with a vanilla game:</p>
<div class="highlight-Ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Fonts]</span>
<span class="na">SFontFile_1</span><span class="o">=</span><span class="s">Data\Fonts\Kingthings_Regular.fnt</span>
<span class="na">SFontFile_2</span><span class="o">=</span><span class="s">Data\Fonts\DarN_Kingthings_Petrock_14.fnt</span>
<span class="na">SFontFile_3</span><span class="o">=</span><span class="s">Data\Fonts\DarN_Kingthings_Petrock_16.fnt</span>
<span class="na">SFontFile_4</span><span class="o">=</span><span class="s">Data\Fonts\DarN_Oblivion_28.fnt</span>
<span class="na">SFontFile_5</span><span class="o">=</span><span class="s">Data\Fonts\Handwritten.fnt</span>
</pre></div>
</div>
<p>While there are no hardset rules for font naming schemes, generally un-numbered fonts are between 12
and 14 point (which again gets scaled from menu coordinates to your screen’s coordinates). Generally
the first font file is used for most UI elements, but there are no hardset rules. We will use font 3
here.</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> traits are read only, we just have to assume that the text can fit
inside the width we wanted for this tile. Therefore, including a default <code class="docutils literal notranslate"><span class="pre">string</span></code>  value is still
useful here.</p>
<p>Color should also be imported from other values, as Oblivion does not actually use black text.</p>
<figure class="align-center" id="id3">
<img alt="../_images/birthsign-image-text.jpg" src="../_images/birthsign-image-text.jpg" />
<figcaption>
<p><span class="caption-text">Functioning menu</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="scripting-current-birthsign">
<h4>Scripting Current Birthsign<a class="headerlink" href="#scripting-current-birthsign" title="Permalink to this heading"></a></h4>
<p>Of course, we do actually want the menu to <em>do</em> something, so lets add in the scripting.</p>
<p>The beauty of basic tiles like text and images means we don’t need to do much to change these
values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRFunction</span>
<span class="n">ref</span> <span class="n">rBirthsign</span>
<span class="n">string_var</span> <span class="n">sBirthsign</span>
<span class="n">Begin</span> <span class="n">Function</span><span class="p">{}</span>
        <span class="n">Let</span> <span class="n">rBirthsign</span> <span class="o">:=</span> <span class="n">GetPlayerBirthsign</span>
        <span class="n">Let</span> <span class="n">sBirthsign</span> <span class="o">:=</span> <span class="n">GetName</span> <span class="n">rBirthsign</span>
        <span class="p">;;</span> <span class="n">Create</span> <span class="n">menu</span> <span class="n">using</span> <span class="n">GMF</span>
        <span class="n">Call</span> <span class="n">GMFShowMenu</span> <span class="s2">&quot;kat</span><span class="se">\b</span><span class="s2">irthsignremake.xml&quot;</span> <span class="mi">0</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_class_name&quot;</span> <span class="s2">&quot;string&quot;</span> <span class="p">(</span><span class="s2">&quot;Current class: &quot;</span> <span class="o">+</span> <span class="n">sBirthsign</span><span class="p">)</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_background_image&quot;</span> <span class="s2">&quot;filename&quot;</span> <span class="p">(</span><span class="s2">&quot;Menus\Birthsign\Birthsign_&quot;</span> <span class="o">+</span> <span class="n">sBirthsign</span> <span class="o">+</span> <span class="s2">&quot;.dds&quot;</span><span class="p">)</span>

        <span class="p">;;</span> <span class="n">PLEASE</span> <span class="n">DESTRUCT</span> <span class="n">UNNEEDED</span> <span class="n">STRINGS</span>
        <span class="n">sv_Destruct</span> <span class="n">sBirthsign</span>
<span class="n">End</span>
</pre></div>
</div>
<p>We only need to touch the appropriate string values of the two tiles. That’s it. With <a class="reference internal" href="../reference/value.html#valuefunctions"><span class="std std-ref">a setter
function</span></a> this is pretty straightforward too.</p>
<figure class="align-center" id="id4">
<img alt="../_images/birthsign-image-current.jpg" src="../_images/birthsign-image-current.jpg" />
<figcaption>
<p><span class="caption-text">Current birthsign is now shown.</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
</section>
<section id="creating-a-list">
<h2>Creating A List<a class="headerlink" href="#creating-a-list" title="Permalink to this heading"></a></h2>
<p>Historically, adding a list to a menu has been the most complicated and unknown part of Oblivion
menus. GenericMenuFramework fortunately makes this simpler. What we need is a <code class="docutils literal notranslate"><span class="pre">rect</span></code> that will
hold our list.</p>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;menu</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;BirthsignRemake&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;class&gt;</span><span class="w"> </span><span class="ni">&amp;GenericMenu;</span><span class="w"> </span><span class="nt">&lt;/class&gt;</span>
<span class="w">        </span><span class="nt">&lt;stackingtype&gt;</span><span class="w"> </span><span class="ni">&amp;no_click_past;</span><span class="w"> </span><span class="nt">&lt;/stackingtype&gt;</span>
<span class="w">        </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">        </span><span class="nt">&lt;explorefade&gt;</span><span class="w"> </span>0.25<span class="w"> </span><span class="nt">&lt;/explorefade&gt;</span>

<span class="w">        </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_background&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;generic_background.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">                </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>100<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                </span><span class="nt">&lt;user0&gt;</span>
<span class="w">                        </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>10<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                </span><span class="nt">&lt;/user0&gt;</span>
<span class="w">                </span><span class="nt">&lt;user1&gt;</span>
<span class="w">                        </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>10<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                </span><span class="nt">&lt;/user1&gt;</span>
<span class="w">                </span><span class="nt">&lt;x&gt;</span>
<span class="w">                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;screen()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">                </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                </span><span class="nt">&lt;y&gt;</span>
<span class="w">                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;screen()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                        </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">                </span><span class="nt">&lt;/y&gt;</span>

<span class="w">                </span><span class="nt">&lt;image</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                        </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                        </span><span class="nt">&lt;filename&gt;</span><span class="w"> </span>Menus\Birthsign\Birthsign_The<span class="w"> </span>Warrior.dds<span class="w"> </span><span class="nt">&lt;/filename&gt;</span>
<span class="w">                        </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>110<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                        </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                        </span><span class="nt">&lt;zoom&gt;</span><span class="w"> </span><span class="ni">&amp;scale;</span><span class="w"> </span><span class="nt">&lt;/zoom&gt;</span>
<span class="w">                        </span><span class="nt">&lt;height&gt;</span><span class="w"> </span>256<span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="w">                        </span><span class="nt">&lt;width&gt;</span><span class="w"> </span>256<span class="w"> </span><span class="nt">&lt;/width&gt;</span>
<span class="w">                        </span><span class="nt">&lt;x&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                        </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>60<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="w">                </span><span class="nt">&lt;/image&gt;</span>

<span class="w">                </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_class_name&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>111<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                        </span><span class="nt">&lt;string&gt;</span><span class="w"> </span>Current<span class="w"> </span>class:<span class="w"> </span>The<span class="w"> </span>Warrior<span class="w"> </span><span class="nt">&lt;/string&gt;</span>
<span class="w">                        </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                        </span><span class="nt">&lt;font&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/font&gt;</span>
<span class="w">                        </span><span class="nt">&lt;red&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/red&gt;</span>
<span class="w">                        </span><span class="nt">&lt;green&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/green&gt;</span>
<span class="w">                        </span><span class="nt">&lt;blue&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/blue&gt;</span>
<span class="w">                        </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>200<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">                        </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">                        </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                </span><span class="nt">&lt;/text&gt;</span>

<span class="w">                </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                        </span><span class="nt">&lt;height&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="w">                        </span><span class="nt">&lt;width&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/width&gt;</span>
<span class="w">                        </span><span class="nt">&lt;x&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                        </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/y&gt;</span>

<span class="w">                        </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_title&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>121<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                                </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">                                </span><span class="nt">&lt;string&gt;</span><span class="w"> </span>Choose<span class="w"> </span>your<span class="w"> </span>birthsign<span class="w"> </span><span class="nt">&lt;/string&gt;</span>
<span class="w">                                </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                                </span><span class="nt">&lt;font&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/font&gt;</span>
<span class="w">                                </span><span class="nt">&lt;red&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/red&gt;</span>
<span class="w">                                </span><span class="nt">&lt;green&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/green&gt;</span>
<span class="w">                                </span><span class="nt">&lt;blue&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/blue&gt;</span>
<span class="w">                                </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>200<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">                                </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">                                </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                                </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                                </span><span class="nt">&lt;wrapwidth&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;parent()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/wrapwidth&gt;</span>
<span class="w">                                </span><span class="nt">&lt;x&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;parent()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>5<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                                </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/text&gt;</span>

<span class="w">                        </span><span class="nt">&lt;image</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;vertical_scroll.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                                </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>4<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                                </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>122<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                                </span><span class="nt">&lt;x&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;sub&gt;</span><span class="w"> </span>10<span class="w"> </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                                </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>36<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="w">                                </span><span class="nt">&lt;height&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;sub&gt;</span><span class="w"> </span>61<span class="w"> </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/height&gt;</span>
<span class="w">                                </span><span class="nt">&lt;user1&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/user1&gt;</span>
<span class="w">                                </span><span class="nt">&lt;user2&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_list_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;child_count&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user8&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- remove the viewable items --&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/user2&gt;</span>
<span class="w">                                </span><span class="nt">&lt;user3&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/user3&gt;</span>
<span class="w">                                </span><span class="nt">&lt;user4&gt;</span><span class="w"> </span>6<span class="w"> </span><span class="nt">&lt;/user4&gt;</span>
<span class="w">                                </span><span class="nt">&lt;user5&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/user5&gt;</span>
<span class="w">                                </span><span class="nt">&lt;user6&gt;</span><span class="w"> </span>33<span class="w"> </span><span class="nt">&lt;/user6&gt;</span>
<span class="w">                                </span><span class="nt">&lt;user8&gt;</span><span class="w"> </span>8<span class="w"> </span><span class="nt">&lt;/user8&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/image&gt;</span>

<span class="w">                        </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_info_list_box&quot;</span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>123<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                                </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>5<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                                </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">                                </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                                </span><span class="nt">&lt;x&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                                </span><span class="nt">&lt;height&gt;</span>
<span class="w">                                        </span>240
<span class="w">                                </span><span class="nt">&lt;/height&gt;</span>
<span class="w">                                </span><span class="nt">&lt;y&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;add&gt;</span>
<span class="w">                                                </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_title&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/y&gt;</span>
<span class="w">                                </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                                </span><span class="nt">&lt;xdefault&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/xdefault&gt;</span>
<span class="w">                                </span><span class="nt">&lt;xlist&gt;</span><span class="w"> </span><span class="ni">&amp;xlist;</span><span class="w"> </span><span class="nt">&lt;/xlist&gt;</span>
<span class="w">                                </span><span class="nt">&lt;xscroll&gt;</span><span class="w"> </span><span class="nt">&lt;ref</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/xscroll&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/rect&gt;</span>
<span class="w">                </span><span class="nt">&lt;/rect&gt;</span>
<span class="w">        </span><span class="nt">&lt;/rect&gt;</span>

<span class="w">        </span><span class="nt">&lt;template</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_template&quot;</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_item&quot;</span><span class="nt">&gt;</span>
<span class="w">                        </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>6<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                        </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>200<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">                        </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">                        </span><span class="nt">&lt;repeatvertical&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/repeatvertical&gt;</span>
<span class="w">                        </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">                        </span><span class="nt">&lt;width&gt;</span><span class="w"> </span>600<span class="w"> </span><span class="nt">&lt;/width&gt;</span>
<span class="w">                        </span><span class="nt">&lt;height&gt;</span><span class="w"> </span>36<span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="w">                        </span><span class="nt">&lt;clips&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/clips&gt;</span>
<span class="w">                        </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">                        </span><span class="nt">&lt;x&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                        </span><span class="nt">&lt;y&gt;</span>
<span class="w">                                </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>36<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">                                </span><span class="nt">&lt;mul&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;listindex&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user7&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/mul&gt;</span>
<span class="w">                                </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>36<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/y&gt;</span>
<span class="w">                        </span><span class="nt">&lt;listclip&gt;</span>
<span class="w">                                </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;listindex&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;gte&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user7&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user8&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;sub&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/gte&gt;</span>
<span class="w">                                </span><span class="nt">&lt;or&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;listindex&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;lt</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user7&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/or&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/listclip&gt;</span>
<span class="w">                        </span><span class="nt">&lt;clicksound&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/clicksound&gt;</span>
<span class="w">                        </span><span class="nt">&lt;listindex&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/listindex&gt;</span>
<span class="w">                        </span><span class="nt">&lt;user1&gt;</span><span class="w"> </span><span class="nt">&lt;/user1&gt;</span>
<span class="w">                        </span><span class="nt">&lt;xdefault&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/xdefault&gt;</span>
<span class="w">                        </span><span class="nt">&lt;xlist&gt;</span><span class="w"> </span><span class="ni">&amp;xitem;</span><span class="w"> </span><span class="nt">&lt;/xlist&gt;</span>
<span class="w">                        </span><span class="nt">&lt;xup&gt;</span><span class="w"> </span><span class="ni">&amp;prev;</span><span class="w"> </span><span class="nt">&lt;/xup&gt;</span>
<span class="w">                        </span><span class="nt">&lt;xdown&gt;</span><span class="w"> </span><span class="ni">&amp;next;</span><span class="w"> </span><span class="nt">&lt;/xdown&gt;</span>

<span class="w">                        </span><span class="nt">&lt;xscroll&gt;</span>
<span class="w">                                </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;listindex&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;sub&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user8&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;ceil&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/ceil&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">                                </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/xscroll&gt;</span>

<span class="w">                        </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_name&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>8<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                                </span><span class="nt">&lt;string&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;parent()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/string&gt;</span>
<span class="w">                                </span><span class="nt">&lt;justify&gt;</span><span class="w"> </span><span class="ni">&amp;left;</span><span class="w"> </span><span class="nt">&lt;/justify&gt;</span>
<span class="w">                                </span><span class="nt">&lt;font&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/font&gt;</span>
<span class="w">                                </span><span class="nt">&lt;red&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/red&gt;</span>
<span class="w">                                </span><span class="nt">&lt;green&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/green&gt;</span>
<span class="w">                                </span><span class="nt">&lt;blue&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/blue&gt;</span>
<span class="w">                                </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>200<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">                                </span><span class="nt">&lt;wrapwidth&gt;</span><span class="w"> </span>475<span class="w"> </span><span class="nt">&lt;/wrapwidth&gt;</span>
<span class="w">                                </span><span class="nt">&lt;wraplines&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/wraplines&gt;</span>
<span class="w">                                </span><span class="nt">&lt;clips&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/clips&gt;</span>
<span class="w">                                </span><span class="nt">&lt;x&gt;</span><span class="w"> </span>5<span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">                                </span><span class="nt">&lt;y&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>16<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;sub&gt;</span>
<span class="w">                                                </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                                </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/y&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/text&gt;</span>

<span class="w">                        </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_focus&quot;</span><span class="nt">&gt;</span>
<span class="w">                                </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;darn\focus_box.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">                                </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>7<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">                                </span><span class="nt">&lt;visible&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;parent()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;mouseover&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;eq&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/eq&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">                                </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>5<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="w">                                </span><span class="nt">&lt;width&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_list_name&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                                        </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>15<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">                                </span><span class="nt">&lt;/width&gt;</span>
<span class="w">                                </span><span class="nt">&lt;height&gt;</span><span class="w"> </span>22<span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="w">                        </span><span class="nt">&lt;/rect&gt;</span>
<span class="w">                </span><span class="nt">&lt;/rect&gt;</span>
<span class="w">        </span><span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;/menu&gt;</span>
</pre></div>
</div>
<p>There’s a lot to handle here. A list isn’t just a single component, it is pretty encompassing. The
actual list <code class="docutils literal notranslate"><span class="pre">rect</span></code> is “bmr_info_list_box”, but this list itself contained in another rect
“bmr_info_box”. This is done to be able to move around the entire list “object”, scroll bar, title,
and any other UI elements, all at the same time. As well, it is much simpler to only manipulate a
dedicated list element.</p>
<p>The template is the UI element for <strong>every</strong> list item. GenericMenuFramework will insert these one
at a time, allowing for side-effects to happen when each list item is inserted.</p>
<section id="bmr-info-box">
<h3><code class="docutils literal notranslate"><span class="pre">bmr_info_box</span></code><a class="headerlink" href="#bmr-info-box" title="Permalink to this heading"></a></h3>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">       </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">       </span><span class="nt">&lt;height&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="w">       </span><span class="nt">&lt;width&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/width&gt;</span>
<span class="w">       </span><span class="nt">&lt;x&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">       </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="nt">&lt;/rect&gt;</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">rect</span></code> contains all of our list related UI elements. Since we are creating a one feature
menu, let’s just make the list the same size as <code class="docutils literal notranslate"><span class="pre">bmr_background_image</span></code>. The Y-position doesn’t
need to move, but the X-position should simply be the width of <code class="docutils literal notranslate"><span class="pre">bmr_background_image</span></code> to offset
this <code class="docutils literal notranslate"><span class="pre">rect</span></code>.</p>
<p>Inside are 3 tiles:</p>
<section id="bmr-title">
<h4><code class="docutils literal notranslate"><span class="pre">bmr_title</span></code><a class="headerlink" href="#bmr-title" title="Permalink to this heading"></a></h4>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_title&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">       </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>121<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">       </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">       </span><span class="nt">&lt;string&gt;</span><span class="w"> </span>Choose<span class="w"> </span>your<span class="w"> </span>birthsign<span class="w"> </span><span class="nt">&lt;/string&gt;</span>
<span class="w">       </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">       </span><span class="nt">&lt;font&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/font&gt;</span>
<span class="w">       </span><span class="nt">&lt;red&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/red&gt;</span>
<span class="w">       </span><span class="nt">&lt;green&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/green&gt;</span>
<span class="w">       </span><span class="nt">&lt;blue&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/blue&gt;</span>
<span class="w">       </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>200<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">       </span><span class="nt">&lt;visible&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">       </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">       </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">       </span><span class="nt">&lt;wrapwidth&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;parent()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/wrapwidth&gt;</span>
<span class="w">       </span><span class="nt">&lt;x&gt;</span>
<span class="w">                </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;parent()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>5<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">       </span><span class="nt">&lt;/x&gt;</span>
<span class="w">       </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="nt">&lt;/text&gt;</span>
</pre></div>
</div>
<p>We should notify the user as to what this list does. This is a basic <code class="docutils literal notranslate"><span class="pre">text</span></code> tile that does this.</p>
</section>
<section id="bmr-scroll-bar">
<h4><code class="docutils literal notranslate"><span class="pre">bmr_scroll_bar</span></code><a class="headerlink" href="#bmr-scroll-bar" title="Permalink to this heading"></a></h4>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;image</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="nt">&gt;</span>
<span class="w">       </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;vertical_scroll.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">       </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">       </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>4<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">       </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>122<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">       </span><span class="nt">&lt;x&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;sub&gt;</span><span class="w"> </span>10<span class="w"> </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">       </span><span class="nt">&lt;/x&gt;</span>
<span class="w">       </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>36<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="w">       </span><span class="nt">&lt;height&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;sub&gt;</span><span class="w"> </span>61<span class="w"> </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">       </span><span class="nt">&lt;/height&gt;</span>
<span class="w">       </span><span class="nt">&lt;user1&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/user1&gt;</span>
<span class="w">       </span><span class="nt">&lt;user2&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_info_list_box&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;child_count&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user8&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="cm">&lt;!-- remove the viewable items --&gt;</span>
<span class="w">              </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">       </span><span class="nt">&lt;/user2&gt;</span>
<span class="w">       </span><span class="nt">&lt;user3&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/user3&gt;</span>
<span class="w">       </span><span class="nt">&lt;user4&gt;</span><span class="w"> </span>6<span class="w"> </span><span class="nt">&lt;/user4&gt;</span>
<span class="w">       </span><span class="nt">&lt;user5&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/user5&gt;</span>
<span class="w">       </span><span class="nt">&lt;user6&gt;</span><span class="w"> </span>33<span class="w"> </span><span class="nt">&lt;/user6&gt;</span>
<span class="w">       </span><span class="nt">&lt;user8&gt;</span><span class="w"> </span>8<span class="w"> </span><span class="nt">&lt;/user8&gt;</span>
<span class="nt">&lt;/image&gt;</span>
</pre></div>
</div>
<p>The scroll bar is fairly complex, requiring a lot to it. The traits here, while sometimes clear, are
particular:</p>
<dl class="field-list simple">
<dt class="field-odd">x<span class="colon">:</span></dt>
<dd class="field-odd"><p>The right edge of the top arrow</p>
</dd>
<dt class="field-even">y<span class="colon">:</span></dt>
<dd class="field-even"><p>The position where the top arrow begins</p>
</dd>
<dt class="field-odd">height<span class="colon">:</span></dt>
<dd class="field-odd"><p>Distance between the two arrows, not to the tips</p>
</dd>
<dt class="field-even">user1<span class="colon">:</span></dt>
<dd class="field-even"><p>Minimum scrollable value, which should be 0 here</p>
</dd>
<dt class="field-odd">user2<span class="colon">:</span></dt>
<dd class="field-odd"><p>Maximum scrollable value, controls scroll-off amount</p>
</dd>
<dt class="field-even">user3<span class="colon">:</span></dt>
<dd class="field-even"><p>Amount to scroll when arrow is clicked</p>
</dd>
<dt class="field-odd">user4<span class="colon">:</span></dt>
<dd class="field-odd"><p>Amount to scroll when bar is clicked</p>
</dd>
<dt class="field-even">user5<span class="colon">:</span></dt>
<dd class="field-even"><p>Starting value of scroll bar. Leave at 0</p>
</dd>
<dt class="field-odd">user6<span class="colon">:</span></dt>
<dd class="field-odd"><p>ID for scroll bar marker</p>
</dd>
<dt class="field-even">user7<span class="colon">:</span></dt>
<dd class="field-even"><p>Do not set, reads scroll position</p>
</dd>
<dt class="field-odd">user8<span class="colon">:</span></dt>
<dd class="field-odd"><p>Amount of visible items</p>
</dd>
</dl>
<p>However, this is all this tile needs to get scrolling working in this document.</p>
</section>
<section id="bmr-info-list-box">
<h4><code class="docutils literal notranslate"><span class="pre">bmr_info_list_box</span></code><a class="headerlink" href="#bmr-info-list-box" title="Permalink to this heading"></a></h4>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_info_list_box&quot;</span><span class="nt">&gt;</span>
<span class="w">       </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>123<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">       </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>5<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">       </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">       </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">       </span><span class="nt">&lt;x&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">       </span><span class="nt">&lt;height&gt;</span><span class="w"> </span>240<span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="w">       </span><span class="nt">&lt;y&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">              </span><span class="nt">&lt;add&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_title&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">       </span><span class="nt">&lt;/y&gt;</span>
<span class="w">       </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">       </span><span class="nt">&lt;xdefault&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/xdefault&gt;</span>
<span class="w">       </span><span class="nt">&lt;xlist&gt;</span><span class="w"> </span><span class="ni">&amp;xlist;</span><span class="w"> </span><span class="nt">&lt;/xlist&gt;</span>
<span class="w">       </span><span class="nt">&lt;xscroll&gt;</span><span class="w"> </span><span class="nt">&lt;ref</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user5&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/xscroll&gt;</span>
<span class="nt">&lt;/rect&gt;</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">rect</span></code> is where we will place our list. The position is mostly the parent <code class="docutils literal notranslate"><span class="pre">rect</span></code>, but
shifted down by the height of <code class="docutils literal notranslate"><span class="pre">bmr_title</span></code>.</p>
<p>We <strong>need</strong> the following traits however:</p>
<dl class="field-list simple">
<dt class="field-odd">target<span class="colon">:</span></dt>
<dd class="field-odd"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;false;</span></code>, this isn’t being targeted</p>
</dd>
<dt class="field-even">xdefault<span class="colon">:</span></dt>
<dd class="field-even"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;true;</span></code></p>
</dd>
<dt class="field-odd">xlist<span class="colon">:</span></dt>
<dd class="field-odd"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;xlist;</span></code>, this tells the engine that this tile contains a list</p>
</dd>
<dt class="field-even">xscroll<span class="colon">:</span></dt>
<dd class="field-even"><p>Set to the <code class="docutils literal notranslate"><span class="pre">user5</span></code> of your scroll bar, in this case we are setting to
<code class="docutils literal notranslate"><span class="pre">bmr_scroll_bar</span></code>. This tells the engine what scroll bar this list is attached to.</p>
</dd>
</dl>
</section>
</section>
<section id="bmr-list-template">
<h3><code class="docutils literal notranslate"><span class="pre">bmr_list_template</span></code><a class="headerlink" href="#bmr-list-template" title="Permalink to this heading"></a></h3>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;template</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_template&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/template&gt;</span>
</pre></div>
</div>
<p>This is a template. All templates must be the last elements in the XML document. Templates are used
to inject into tiles during run-time. In this case, this template is used for list elements. The
template has <strong>no</strong> traits, it only contains other valid non-template tiles.</p>
<section id="bmr-list-item">
<h4><code class="docutils literal notranslate"><span class="pre">bmr_list_item</span></code><a class="headerlink" href="#bmr-list-item" title="Permalink to this heading"></a></h4>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_item&quot;</span><span class="nt">&gt;</span>
<span class="w">       </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>6<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">       </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>200<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">       </span><span class="nt">&lt;target&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/target&gt;</span>
<span class="w">       </span><span class="nt">&lt;repeatvertical&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/repeatvertical&gt;</span>
<span class="w">       </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">       </span><span class="nt">&lt;width&gt;</span><span class="w"> </span>600<span class="w"> </span><span class="nt">&lt;/width&gt;</span>
<span class="w">       </span><span class="nt">&lt;height&gt;</span><span class="w"> </span>36<span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="w">       </span><span class="nt">&lt;clips&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/clips&gt;</span>
<span class="w">       </span><span class="nt">&lt;locus&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/locus&gt;</span>
<span class="w">       </span><span class="nt">&lt;x&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_background_image&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">       </span><span class="nt">&lt;y&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>36<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">              </span><span class="nt">&lt;mul&gt;</span>
<span class="w">                     </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;listindex&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                     </span><span class="nt">&lt;sub</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user7&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;/mul&gt;</span>
<span class="w">              </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>36<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">       </span><span class="nt">&lt;/y&gt;</span>
<span class="w">       </span><span class="nt">&lt;listclip&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;listindex&quot;</span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;gte&gt;</span>
<span class="w">                     </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user7&quot;</span><span class="nt">/&gt;</span>
<span class="w">                     </span><span class="nt">&lt;add</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user8&quot;</span><span class="nt">/&gt;</span>
<span class="w">                     </span><span class="nt">&lt;sub&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">              </span><span class="nt">&lt;/gte&gt;</span>
<span class="w">              </span><span class="nt">&lt;or&gt;</span>
<span class="w">                     </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;listindex&quot;</span><span class="nt">/&gt;</span>
<span class="w">                     </span><span class="nt">&lt;lt</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user7&quot;</span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;/or&gt;</span>
<span class="w">       </span><span class="nt">&lt;/listclip&gt;</span>
<span class="w">       </span><span class="nt">&lt;clicksound&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/clicksound&gt;</span>
<span class="w">       </span><span class="nt">&lt;listindex&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/listindex&gt;</span>
<span class="w">       </span><span class="nt">&lt;user1&gt;</span><span class="w"> </span><span class="nt">&lt;/user1&gt;</span>
<span class="w">       </span><span class="nt">&lt;xdefault&gt;</span><span class="w"> </span><span class="ni">&amp;false;</span><span class="w"> </span><span class="nt">&lt;/xdefault&gt;</span>
<span class="w">       </span><span class="nt">&lt;xlist&gt;</span><span class="w"> </span><span class="ni">&amp;xitem;</span><span class="w"> </span><span class="nt">&lt;/xlist&gt;</span>
<span class="w">       </span><span class="nt">&lt;xup&gt;</span><span class="w"> </span><span class="ni">&amp;prev;</span><span class="w"> </span><span class="nt">&lt;/xup&gt;</span>
<span class="w">       </span><span class="nt">&lt;xdown&gt;</span><span class="w"> </span><span class="ni">&amp;next;</span><span class="w"> </span><span class="nt">&lt;/xdown&gt;</span>

<span class="w">       </span><span class="nt">&lt;xscroll&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;listindex&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;sub&gt;</span>
<span class="w">                     </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_scroll_bar&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user8&quot;</span><span class="nt">/&gt;</span>
<span class="w">                     </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">                     </span><span class="nt">&lt;ceil&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/ceil&gt;</span>
<span class="w">              </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">              </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">       </span><span class="nt">&lt;/xscroll&gt;</span>
<span class="nt">&lt;/rect&gt;</span>
</pre></div>
</div>
<p>This is the primary <code class="docutils literal notranslate"><span class="pre">rect</span></code> for each list item. It needs some specific traits beyond
appearance/functionality to work as a list item:</p>
<dl class="field-list simple">
<dt class="field-odd">id<span class="colon">:</span></dt>
<dd class="field-odd"><p>Needs an ID. You do not need to worry about unique IDs for each list item, but an ID is needed.</p>
</dd>
<dt class="field-even">target<span class="colon">:</span></dt>
<dd class="field-even"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;true;</span></code>, needed to enable scrolling and clicking.</p>
</dd>
<dt class="field-odd">repeatvertical<span class="colon">:</span></dt>
<dd class="field-odd"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;true;</span></code>, needed for lists.</p>
</dd>
<dt class="field-even">clips<span class="colon">:</span></dt>
<dd class="field-even"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;true;</span></code>, needed to hide value items outside of scroll range.</p>
</dd>
<dt class="field-odd">listclip<span class="colon">:</span></dt>
<dd class="field-odd"><p>This sets the amount of values that are removed from view. What is needed is for the
current listindex to be between the current scroll value and the maximum possible value
or below the scroll value. The settings here should work for most cases.</p>
</dd>
<dt class="field-even">listindex<span class="colon">:</span></dt>
<dd class="field-even"><p>Set to 0, the index for the list item.</p>
</dd>
<dt class="field-odd">xdefault<span class="colon">:</span></dt>
<dd class="field-odd"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;false;</span></code>.</p>
</dd>
<dt class="field-even">xlist<span class="colon">:</span></dt>
<dd class="field-even"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;xitem;</span></code>, this tells the engine that this tile is an item for a list.</p>
</dd>
<dt class="field-odd">xup<span class="colon">:</span></dt>
<dd class="field-odd"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;prev;</span></code> to go to the previous list item.</p>
</dd>
<dt class="field-even">xdown<span class="colon">:</span></dt>
<dd class="field-even"><p>Set to <code class="docutils literal notranslate"><span class="pre">&amp;next;</span></code> to go to the next list item.</p>
</dd>
<dt class="field-odd">xscroll<span class="colon">:</span></dt>
<dd class="field-odd"><p>This controls how far the list item moves when scrolling. The idea is that this should
scroll no more than the possible viewable value. The settings here should work for most
cases.</p>
</dd>
</dl>
<p>Inside are 2 more tiles:</p>
<section id="bmr-list-name">
<h5><code class="docutils literal notranslate"><span class="pre">bmr_list_name</span></code><a class="headerlink" href="#bmr-list-name" title="Permalink to this heading"></a></h5>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_name&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">       </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>8<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">       </span><span class="nt">&lt;string&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;parent()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;user1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/string&gt;</span>
<span class="w">       </span><span class="nt">&lt;justify&gt;</span><span class="w"> </span><span class="ni">&amp;left;</span><span class="w"> </span><span class="nt">&lt;/justify&gt;</span>
<span class="w">       </span><span class="nt">&lt;font&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/font&gt;</span>
<span class="w">       </span><span class="nt">&lt;red&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/red&gt;</span>
<span class="w">       </span><span class="nt">&lt;green&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/green&gt;</span>
<span class="w">       </span><span class="nt">&lt;blue&gt;</span><span class="w"> </span>0<span class="w"> </span><span class="nt">&lt;/blue&gt;</span>
<span class="w">       </span><span class="nt">&lt;alpha&gt;</span><span class="w"> </span>200<span class="w"> </span><span class="nt">&lt;/alpha&gt;</span>
<span class="w">       </span><span class="nt">&lt;wrapwidth&gt;</span><span class="w"> </span>475<span class="w"> </span><span class="nt">&lt;/wrapwidth&gt;</span>
<span class="w">       </span><span class="nt">&lt;wraplines&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/wraplines&gt;</span>
<span class="w">       </span><span class="nt">&lt;clips&gt;</span><span class="w"> </span><span class="ni">&amp;true;</span><span class="w"> </span><span class="nt">&lt;/clips&gt;</span>
<span class="w">       </span><span class="nt">&lt;x&gt;</span><span class="w"> </span>5<span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">       </span><span class="nt">&lt;y&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy&gt;</span><span class="w"> </span>16<span class="w"> </span><span class="nt">&lt;/copy&gt;</span>
<span class="w">              </span><span class="nt">&lt;sub&gt;</span>
<span class="w">                     </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;me()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;height&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">                     </span><span class="nt">&lt;div&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/div&gt;</span>
<span class="w">              </span><span class="nt">&lt;/sub&gt;</span>
<span class="w">       </span><span class="nt">&lt;/y&gt;</span>
<span class="nt">&lt;/text&gt;</span>
</pre></div>
</div>
<p>This block is just the text for the list. For convenience, we set the <code class="docutils literal notranslate"><span class="pre">string</span></code> trait to the
<code class="docutils literal notranslate"><span class="pre">user1</span></code> trait of its parent tile for ease of use. There is nothing special about this tile
otherwise.</p>
</section>
<section id="bmr-list-focus">
<h5><code class="docutils literal notranslate"><span class="pre">bmr_list_focus</span></code><a class="headerlink" href="#bmr-list-focus" title="Permalink to this heading"></a></h5>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_focus&quot;</span><span class="nt">&gt;</span>
<span class="w">       </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;darn\focus_box.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">       </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>7<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">       </span><span class="nt">&lt;visible&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;parent()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;mouseover&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;eq&gt;</span><span class="w"> </span>1<span class="w"> </span><span class="nt">&lt;/eq&gt;</span>
<span class="w">       </span><span class="nt">&lt;/visible&gt;</span>
<span class="w">       </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>5<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="w">       </span><span class="nt">&lt;width&gt;</span>
<span class="w">              </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;bmr_list_name&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;width&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">              </span><span class="nt">&lt;add&gt;</span><span class="w"> </span>15<span class="w"> </span><span class="nt">&lt;/add&gt;</span>
<span class="w">       </span><span class="nt">&lt;/width&gt;</span>
<span class="w">       </span><span class="nt">&lt;height&gt;</span><span class="w"> </span>22<span class="w"> </span><span class="nt">&lt;/height&gt;</span>
<span class="nt">&lt;/rect&gt;</span>
</pre></div>
</div>
<p>This <code class="docutils literal notranslate"><span class="pre">rect</span></code> provides a focus box for the list items when there’s a mouseover event for it. We use
a prefab for this, which does most of the work. The main thing here is that the <code class="docutils literal notranslate"><span class="pre">visible</span></code> trait
needs to compare to 1 to determine if it should be visible or not.</p>
</section>
</section>
</section>
<section id="scripting-the-list">
<span id="scriptingthelist"></span><h3>Scripting the List<a class="headerlink" href="#scripting-the-list" title="Permalink to this heading"></a></h3>
<p>Now that we have the basics of the menu, we need to hook up all the scripting. Fortunately this is
pretty simple overall.</p>
<p>For the main function script, we don’t need to add much:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRFunction</span>
<span class="n">ref</span> <span class="n">rBirthsign</span>
<span class="n">string_var</span> <span class="n">sBirthsign</span>
<span class="n">array_var</span> <span class="n">aBirthsigns</span>
<span class="n">ref</span> <span class="n">rFunction</span>
<span class="n">Begin</span> <span class="n">Function</span><span class="p">{}</span>
        <span class="p">;;</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">birthsign</span> <span class="n">information</span>
        <span class="n">Let</span> <span class="n">rBirthsign</span> <span class="o">:=</span> <span class="n">GetPlayerBirthsign</span>
        <span class="n">Let</span> <span class="n">sBirthsign</span> <span class="o">:=</span> <span class="n">GetName</span> <span class="n">rBirthsign</span>
        <span class="n">let</span> <span class="n">aBirthsigns</span> <span class="o">:=</span> <span class="n">ar_Construct</span> <span class="n">array</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignApprentice</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignAtronach</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignLord</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignLover</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignMage</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignRitual</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignSerpent</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignShadow</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignSteed</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignThief</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignTower</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignWarrior</span>

        <span class="p">;;</span> <span class="n">Create</span> <span class="n">menu</span> <span class="n">using</span> <span class="n">GMF</span>
        <span class="n">Call</span> <span class="n">GMFShowMenu</span> <span class="s2">&quot;kat</span><span class="se">\b</span><span class="s2">irthsignremake.xml&quot;</span> <span class="mi">400</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_class_name&quot;</span> <span class="s2">&quot;string&quot;</span> <span class="p">(</span><span class="s2">&quot;Current class: &quot;</span> <span class="o">+</span> <span class="n">sBirthsign</span><span class="p">)</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_background_image&quot;</span> <span class="s2">&quot;filename&quot;</span> <span class="p">(</span><span class="s2">&quot;Menus\Birthsign\Birthsign_&quot;</span> <span class="o">+</span> <span class="n">sBirthsign</span> <span class="o">+</span> <span class="s2">&quot;.dds&quot;</span><span class="p">)</span>

        <span class="p">;;</span> <span class="n">Populate</span> <span class="n">List</span>
        <span class="n">Let</span> <span class="n">rFunction</span> <span class="o">:=</span> <span class="n">BMRSetListText</span>
        <span class="n">Call</span> <span class="n">GMFInsertArrayList</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_info_box</span><span class="se">\b</span><span class="s2">mr_info_list_box&quot;</span> <span class="s2">&quot;bmr_list_template&quot;</span> <span class="n">aBirthsigns</span> <span class="n">rFunction</span>
<span class="n">End</span>
</pre></div>
</div>
<p>We only add 1 extra function call from GenericMenuFramework, which is the list function, but we also
need to pass a function along with it. The function <code class="docutils literal notranslate"><span class="pre">GMFInsertArrayList</span></code> needs to pass the tile we
want to have the list, the template, the 0-indexed array, and an optional side-effect function.
Without this side-effect function, this function will just display garbage but <em>will</em> insert the
amount of items we wanted. We need the side-effect function to at least display text.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRSetListText</span>
<span class="n">string_var</span> <span class="n">sTile</span>
<span class="n">array_var</span> <span class="n">aList</span>
<span class="nb">int</span> <span class="n">iIndex</span>
<span class="n">string_var</span> <span class="n">sText</span>
<span class="n">string_var</span> <span class="n">sTrueTile</span>
<span class="n">ref</span> <span class="n">rTempRef</span>
<span class="n">Begin</span> <span class="n">Function</span> <span class="p">{</span><span class="n">sTile</span><span class="p">,</span> <span class="n">aList</span><span class="p">,</span> <span class="n">iIndex</span><span class="p">}</span>
        <span class="p">;;</span> <span class="n">Normalize</span> <span class="nb">list</span> <span class="n">index</span> <span class="n">tile</span> <span class="n">name</span>
        <span class="n">Let</span> <span class="n">sTrueTile</span> <span class="o">:=</span> <span class="n">sTile</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> + $iIndex</span>
        <span class="n">Let</span> <span class="n">rTempRef</span> <span class="o">:=</span> <span class="n">aList</span><span class="p">[</span><span class="n">iIndex</span><span class="p">]</span>
        <span class="p">;;</span> <span class="n">Render</span> <span class="n">name</span> <span class="n">of</span> <span class="n">reference</span>
        <span class="n">Let</span> <span class="n">sText</span> <span class="o">:=</span> <span class="n">GetName</span> <span class="n">rTempRef</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="n">sTrueTile</span> <span class="s2">&quot;user1&quot;</span> <span class="n">sText</span>
<span class="n">End</span>
</pre></div>
</div>
<p>Since we just need to add the name of the birthsign to the list item’s text tile, this function is
absurdly simple. We get the current birthsign from the passed array and index, then we set the
<code class="docutils literal notranslate"><span class="pre">user1</span></code> of <code class="docutils literal notranslate"><span class="pre">bmr_list_box</span></code>.</p>
<p>But this is called differently. For other tile manipulations, we normally just pass a variable such
as <code class="docutils literal notranslate"><span class="pre">sTile</span></code>, but that’s not what’s happening here. Since list items are iterated over, they are
indexed inside the menu that’s rendered. Therefore the first list item is <code class="docutils literal notranslate"><span class="pre">bmr_info_list_box/0</span></code>.
Notice how we don’t use <code class="docutils literal notranslate"><span class="pre">bmr_list_box</span></code> here. This is <em>not</em> a bug but intentional behavior. If we
use <code class="docutils literal notranslate"><span class="pre">tile_GetInfo</span></code> on <code class="docutils literal notranslate"><span class="pre">sTrueTile</span></code> to count its children then it will return 2, for
<code class="docutils literal notranslate"><span class="pre">bmr_list_name</span></code> and <code class="docutils literal notranslate"><span class="pre">bmr_list_focus</span></code>.</p>
<p>We now have a menu with a list populated!</p>
<figure class="align-center" id="id5">
<img alt="birthsign-plain-1" src="../_images/birthsign-list-plain-1.jpg" />
<figcaption>
<p><span class="caption-text">We have a working list.</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id6">
<img alt="birthsign-plain-2" src="../_images/birthsign-list-plain-2.jpg" />
<figcaption>
<p><span class="caption-text">We can even highlight items with our mouse.</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>That was a lot of work, but the hardest part was done. Congrats, you’ve uncovered one of the hardest
aspects of Oblivion menus. But we are far from done. We need 2 more things, scrolling and making the
list update the player’s birthsign. Both are fairly simple so lets just go with that order.</p>
</section>
</section>
<section id="scrolling-a-list">
<h2>Scrolling A List<a class="headerlink" href="#scrolling-a-list" title="Permalink to this heading"></a></h2>
<p>Scrolling a list, even more difficult than creating a list historically, is one of the simplest
parts of GenericMenuFramework. We need 2 things, a quest script in order to run the needed functions
continuously and an array of IDs to target for scrolling. Dragging the scroll marker will also be
included here, since it is even simpler to handle.</p>
<section id="quest-script">
<h3>Quest Script<a class="headerlink" href="#quest-script" title="Permalink to this heading"></a></h3>
<p>Quest scripts in Oblivion function as “global” scripts. Since quest objects are always in memory,
their associated scripts are always in memory. We can use this for input behavior in this case. As
well, since quest scripts are always in memory, we can use them as a namespace for variables. Both
will features will be in use here.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>scn BMRScript
float fQuestDelayTime
string_var sActiveTile
array_var aIDs
Begin MenuMode 1011
        Let fQuestDelayTime := 0.001
        Let sActiveTile := GetActiveUIComponentName
        if eval sv_Compare &quot;bmr_background&quot; sActiveTile &gt; -2
                ;; DRAGGING -- takes tile to be dragged
                Call GMFOnDragInitFunction &quot;bmr_background\bmr_info_box\bmr_scroll_bar&quot;
                ;; SCROLLING -- takes tile to be dragged, as well as array of IDs
                Call GMFOnScrollVerticalInitFunction &quot;bmr_background\bmr_info_box\bmr_scroll_bar&quot; aIDs
        endif
        ;; WARN: Remember to destruct your strings!!
        sv_Destruct sActiveTile
End
</pre></div>
</div>
<p>For clarity, the quest script’s ID is going to be <code class="docutils literal notranslate"><span class="pre">BMR</span></code>.</p>
<p>This is a pretty basic script. Since this plugin is only focused upon creating a new generic menu,
we can use a <code class="docutils literal notranslate"><span class="pre">Begin</span> <span class="pre">MenuMode</span> <span class="pre">1011</span></code> block, with 1011 being the ID for generic menus. We still want
to check if we are in <em>our</em> menu, but we can do that with a quick check using
<code class="docutils literal notranslate"><span class="pre">GetActiveUIComponentName</span></code> and seeing if our root menu <code class="docutils literal notranslate"><span class="pre">rect</span></code> <code class="docutils literal notranslate"><span class="pre">bmr_background</span></code> is found in the
active tile (active tile meaning the tile the mouse is focused on). <code class="docutils literal notranslate"><span class="pre">sv_Compare</span></code> returns weird
results, but we are basically asking “is our compared string found <em>anywhere</em> inside the active
tile”.</p>
<p>Inside this check, we have two calls: <code class="docutils literal notranslate"><span class="pre">GMFOnDragInitFunction</span></code> and
<code class="docutils literal notranslate"><span class="pre">GMFOnScrollVerticalInitFunction</span></code>. The first function just takes the scroll bar you want to be
able to drag. The second function takes the scroll bar you want to scroll <strong>and</strong> an array of IDs
that you want the scrolling to be active for. We need to set up this array, and we can do this
within <code class="docutils literal notranslate"><span class="pre">BMRFunction</span></code>.</p>
</section>
<section id="adding-id-array">
<h3>Adding ID Array<a class="headerlink" href="#adding-id-array" title="Permalink to this heading"></a></h3>
<p>Since we declared the variable for the array in the quest script, we can easily access them in
<code class="docutils literal notranslate"><span class="pre">BMRFunction</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRFunction</span>
<span class="n">ref</span> <span class="n">rBirthsign</span>
<span class="n">string_var</span> <span class="n">sBirthsign</span>
<span class="n">array_var</span> <span class="n">aBirthsigns</span>
<span class="n">ref</span> <span class="n">rFunction</span>
<span class="n">Begin</span> <span class="n">Function</span><span class="p">{}</span>
        <span class="p">;;</span> <span class="n">Add</span> <span class="n">IDs</span> <span class="n">to</span> <span class="n">passing</span> <span class="n">array</span>
        <span class="n">Let</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="o">:=</span> <span class="n">ar_Construct</span> <span class="n">array</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">33</span>                <span class="p">;</span><span class="n">vertical_scroll_marker</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">100</span>               <span class="p">;</span><span class="n">bmr_background</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">120</span>               <span class="p">;</span><span class="n">bmr_info_box</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">122</span>               <span class="p">;</span><span class="n">bmr_scroll_bar</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">123</span>               <span class="p">;</span><span class="n">bmr_info_list_box</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">200</span>               <span class="p">;</span><span class="n">bmr_list_item</span>

        <span class="p">;;</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">birthsign</span> <span class="n">information</span>
        <span class="n">Let</span> <span class="n">rBirthsign</span> <span class="o">:=</span> <span class="n">GetPlayerBirthsign</span>
        <span class="n">Let</span> <span class="n">sBirthsign</span> <span class="o">:=</span> <span class="n">GetName</span> <span class="n">rBirthsign</span>
        <span class="n">let</span> <span class="n">aBirthsigns</span> <span class="o">:=</span> <span class="n">ar_Construct</span> <span class="n">array</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignApprentice</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignAtronach</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignLord</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignLover</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignMage</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignRitual</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignSerpent</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignShadow</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignSteed</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignThief</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignTower</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignWarrior</span>

        <span class="p">;;</span> <span class="n">Create</span> <span class="n">menu</span> <span class="n">using</span> <span class="n">GMF</span>
        <span class="n">Call</span> <span class="n">GMFShowMenu</span> <span class="s2">&quot;kat</span><span class="se">\b</span><span class="s2">irthsignremake.xml&quot;</span> <span class="mi">400</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_class_name&quot;</span> <span class="s2">&quot;string&quot;</span> <span class="p">(</span><span class="s2">&quot;Current class: &quot;</span> <span class="o">+</span> <span class="n">sBirthsign</span><span class="p">)</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_background_image&quot;</span> <span class="s2">&quot;filename&quot;</span> <span class="p">(</span><span class="s2">&quot;Menus\Birthsign\Birthsign_&quot;</span> <span class="o">+</span> <span class="n">sBirthsign</span> <span class="o">+</span> <span class="s2">&quot;.dds&quot;</span><span class="p">)</span>

        <span class="p">;;</span> <span class="n">Populate</span> <span class="n">List</span>
        <span class="n">Let</span> <span class="n">rFunction</span> <span class="o">:=</span> <span class="n">BMRSetListText</span>
        <span class="n">Call</span> <span class="n">GMFInsertArrayList</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_info_box</span><span class="se">\b</span><span class="s2">mr_info_list_box&quot;</span> <span class="s2">&quot;bmr_list_template&quot;</span> <span class="n">aBirthsigns</span> <span class="n">rFunction</span>

        <span class="p">;;</span> <span class="n">WARN</span><span class="p">:</span> <span class="n">Remember</span> <span class="n">to</span> <span class="n">destruct</span> <span class="n">strings</span>
        <span class="n">sv_Destruct</span> <span class="n">sBirthsign</span>
<span class="n">End</span>
</pre></div>
</div>
<p>In here, we insert the IDs we want to control to the namespaced <code class="docutils literal notranslate"><span class="pre">aIDs</span></code>. Each of these IDs are
basically all the IDs we have, but if you want you can control these finer. It is also helpful to
label what each ID is.</p>
<p>Now, since we call <code class="docutils literal notranslate"><span class="pre">ar_Construct</span></code> each time we call this function, and we call this function with
an activator, <code class="docutils literal notranslate"><span class="pre">BMR.aIDs</span></code> is always recreated. Just remember this when you’re dealing with arrays.
But with this in mind, you should be able to scroll with a mouse wheel and by dragging the scroll
bar marker. Also, as a side effect of everything we’ve previously set up with the XML document we
can also use the arrow keys (or controller) to navigate the list with scrolling.</p>
<p>None of this was painful now was it?</p>
</section>
</section>
<section id="setting-birthsign">
<h2>Setting Birthsign<a class="headerlink" href="#setting-birthsign" title="Permalink to this heading"></a></h2>
<p>Now that we have scrolling working, let’s make the menu actually do what want it to do: set the
player’s birthsign.</p>
<p>This is where things become more complicated from a programmer’s perspective. See, we need to be
able to both display the birthsign name <em>and</em> set the player’s birthsign. But there’s a loss of
information when we get the name of a object. It is functionally impossible to go from an object’s
name to an object’s editorID. So what do we do? For this, we need a deeper understanding of how
Oblivion stores objects.</p>
<section id="editorids-formids">
<h3>EditorIDs &amp; FormIDs<a class="headerlink" href="#editorids-formids" title="Permalink to this heading"></a></h3>
<p>Objects in Oblivion are literally everything. Every quest, script, item, NPC, etc… is an object.
There are two ways to express the unique tokens for each object, the “editorID” and the “formID”
(typically referred to as a form).</p>
<dl class="field-list simple">
<dt class="field-odd">EditorID<span class="colon">:</span></dt>
<dd class="field-odd"><p>An alphanumerical string of characters with no spaces or special characters. There’s no
limit past the lack of special characters.</p>
</dd>
<dt class="field-even">FormID<span class="colon">:</span></dt>
<dd class="field-even"><p>A hexadecimal number, with the first 2 characters being optional. The first 2 characters
are the hexadecimal index of the plugin, and thus not static. Thus we have a 6 bit object
limit for every plugin.</p>
</dd>
</dl>
<p>Despite being able to see both of these pretty much everywhere, from vanilla Construction Set to the
extender to the game itself, you <strong>cannot</strong> use formIDs easily anywhere. There is exactly one
function that allows you to directly to use forms: <code class="docutils literal notranslate"><span class="pre">GetFormFromMod</span></code>.</p>
<p>Curiously, there are a number of functions that let you use the <em>decimal</em> form of formIDs but these
are not used outside of specific needs.</p>
<p>And even worse, we <strong>cannot</strong> get the token of editorIDs at all. We cannot store BirthsignWarrior
for instance, it would only store the decimal notation of this. This might seem fine, but it can run
into issues with float precision along side lack of support of decimal -&gt; editorID support.</p>
</section>
<section id="how-to-store-forms">
<h3>How to Store Forms<a class="headerlink" href="#how-to-store-forms" title="Permalink to this heading"></a></h3>
<p>So, we only have one function that can directly use forms and we can’t store editorIDs really. That
leaves us with one real option:</p>
<p><strong>directly storing the hexadecimal form inside the menu itself</strong></p>
<p>This is, frankly, a convoluted approach but the only other option is to somehow store the index of
the array to index and then to subscript the array when we need to. I believe this is ultimately the
simpler option on the code, even if more abstract.</p>
<p>So, how do we deal with this?</p>
<p>If you read through <a class="reference internal" href="../xml/index.html#xmlreference"><span class="std std-ref">the XML Reference</span></a>, you may have come across the idea that
traits that have <code class="docutils literal notranslate"><span class="pre">_</span></code> prefixed are custom and can be used for literally anything. As well, if you
read through the 2 prefabs we used in this menu (<code class="docutils literal notranslate"><span class="pre">generic_background.xml</span></code> and
<code class="docutils literal notranslate"><span class="pre">vertical_scroll.xml</span></code>) you’ll also see these used. This basically means we can set to do <em>anything</em>
we really want. So, lets create a <code class="docutils literal notranslate"><span class="pre">data</span></code> tile in our XML document that stores data for each list
item:</p>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;template</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_template&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_item&quot;</span><span class="nt">&gt;</span>

<span class="w">                    </span><span class="cm">&lt;!--...--&gt;</span>

<span class="w">        </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;data&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;_signhex&gt;</span><span class="w"> </span>nil<span class="w"> </span><span class="nt">&lt;/_signhex&gt;</span>
<span class="w">        </span><span class="nt">&lt;/rect&gt;</span>

<span class="w">        </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_name&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="cm">&lt;!--...--&gt;</span>
<span class="w">        </span><span class="nt">&lt;/text&gt;</span>

<span class="w">        </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_list_focus&quot;</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="cm">&lt;!--...--&gt;</span>
<span class="w">        </span><span class="nt">&lt;/rect&gt;</span>
<span class="w">    </span><span class="nt">&lt;/rect&gt;</span>
<span class="nt">&lt;/template&gt;</span>
</pre></div>
</div>
<p>This tile is just a <code class="docutils literal notranslate"><span class="pre">rect</span></code> that contains a single underscored prefix trait: <code class="docutils literal notranslate"><span class="pre">_signhex</span></code>. There’s
nothing else we need to do with the XML document here.</p>
<section id="scripting-form-storage">
<h4>Scripting Form Storage<a class="headerlink" href="#scripting-form-storage" title="Permalink to this heading"></a></h4>
<p>We actually have everything we need to store the form. Remember that side-effect function in
<a class="reference internal" href="#scriptingthelist"><span class="std std-ref">Scripting the List</span></a>? We can simply add our storage in there.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRSetListText</span>
<span class="n">string_var</span> <span class="n">sTile</span>
<span class="n">array_var</span> <span class="n">aList</span>
<span class="nb">int</span> <span class="n">iIndex</span>
<span class="n">string_var</span> <span class="n">sText</span>
<span class="n">string_var</span> <span class="n">sTrueTile</span>
<span class="n">ref</span> <span class="n">rTempRef</span>
<span class="n">Begin</span> <span class="n">Function</span> <span class="p">{</span><span class="n">sTile</span><span class="p">,</span> <span class="n">aList</span><span class="p">,</span> <span class="n">iIndex</span><span class="p">}</span>

        <span class="p">;;</span> <span class="n">Normalize</span> <span class="nb">list</span> <span class="n">index</span> <span class="n">tile</span> <span class="n">name</span>
        <span class="n">Let</span> <span class="n">sTrueTile</span> <span class="o">:=</span> <span class="n">sTile</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> + $iIndex</span>

        <span class="p">;;</span> <span class="n">Store</span> <span class="n">reference</span> <span class="n">to</span> <span class="nb">list</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">hex</span> <span class="nb">format</span>
        <span class="n">Let</span> <span class="n">rTempRef</span> <span class="o">:=</span> <span class="n">aList</span><span class="p">[</span><span class="n">iIndex</span><span class="p">]</span>
        <span class="n">Let</span> <span class="n">sText</span> <span class="o">:=</span> <span class="n">GetRawFormIDString</span> <span class="n">rTempRef</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="p">(</span><span class="n">sTrueTile</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2"> + &quot;</span><span class="n">data</span><span class="s2">&quot;) &quot;</span><span class="n">_signhex</span><span class="s2">&quot; sText</span>

        <span class="p">;;</span> <span class="n">Render</span> <span class="n">name</span> <span class="n">of</span> <span class="n">reference</span>
        <span class="n">Let</span> <span class="n">sText</span> <span class="o">:=</span> <span class="n">GetName</span> <span class="n">rTempRef</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="n">sTrueTile</span> <span class="s2">&quot;user1&quot;</span> <span class="n">sText</span>
<span class="n">End</span>
</pre></div>
</div>
<p>This isn’t so bad. We already have the editorIDs from the passed array, and we can use
<code class="docutils literal notranslate"><span class="pre">GetRawFormIDString</span></code> to get the hexadecimal string form for this reference, and then store it into
our our data <code class="docutils literal notranslate"><span class="pre">rect</span></code>.</p>
<p>For reference, a hexadecimal string is stored as a string with <code class="docutils literal notranslate"><span class="pre">0x</span></code> prepended. We will deal with
this later.</p>
</section>
<section id="extracting-from-storage">
<h4>Extracting From Storage<a class="headerlink" href="#extracting-from-storage" title="Permalink to this heading"></a></h4>
<p>Now that we stored the form, we need to extract it. It’s a bit more complicated, but first we need
to actually be able to interact with the menu. Yet again, this is pretty simple. MenuQue offers
event handlers, which fires a function based on some game event. GenericMenuFramework wraps this up
neatly for us, so its just a couple of lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRFunction</span>
<span class="n">ref</span> <span class="n">rBirthsign</span>
<span class="n">string_var</span> <span class="n">sBirthsign</span>
<span class="n">array_var</span> <span class="n">aBirthsigns</span>
<span class="n">ref</span> <span class="n">rFunction</span>
<span class="n">Begin</span> <span class="n">Function</span><span class="p">{}</span>
        <span class="p">;;</span> <span class="n">Add</span> <span class="n">IDs</span> <span class="n">to</span> <span class="n">passing</span> <span class="n">array</span>
        <span class="n">Let</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="o">:=</span> <span class="n">ar_Construct</span> <span class="n">array</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">33</span>                <span class="p">;</span><span class="n">vertical_scroll_marker</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">100</span>               <span class="p">;</span><span class="n">bmr_background</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">120</span>               <span class="p">;</span><span class="n">bmr_info_box</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">122</span>               <span class="p">;</span><span class="n">bmr_scroll_bar</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">123</span>               <span class="p">;</span><span class="n">bmr_info_list_box</span>
        <span class="n">ar_Append</span> <span class="n">BMR</span><span class="o">.</span><span class="n">aIDs</span> <span class="mi">200</span>               <span class="p">;</span><span class="n">bmr_list_item</span>

        <span class="p">;;</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">birthsign</span> <span class="n">information</span>
        <span class="n">Let</span> <span class="n">rBirthsign</span> <span class="o">:=</span> <span class="n">GetPlayerBirthsign</span>
        <span class="n">Let</span> <span class="n">sBirthsign</span> <span class="o">:=</span> <span class="n">GetName</span> <span class="n">rBirthsign</span>
        <span class="n">let</span> <span class="n">aBirthsigns</span> <span class="o">:=</span> <span class="n">ar_Construct</span> <span class="n">array</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignApprentice</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignAtronach</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignLord</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignLover</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignMage</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignRitual</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignSerpent</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignShadow</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignSteed</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignThief</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignTower</span>
        <span class="n">ar_Append</span> <span class="n">aBirthsigns</span> <span class="n">BirthSignWarrior</span>

        <span class="p">;;</span> <span class="n">Create</span> <span class="n">menu</span> <span class="n">using</span> <span class="n">GMF</span>
        <span class="n">Call</span> <span class="n">GMFShowMenu</span> <span class="s2">&quot;kat</span><span class="se">\b</span><span class="s2">irthsignremake.xml&quot;</span> <span class="mi">400</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_class_name&quot;</span> <span class="s2">&quot;string&quot;</span> <span class="p">(</span><span class="s2">&quot;Current class: &quot;</span> <span class="o">+</span> <span class="n">sBirthsign</span><span class="p">)</span>
        <span class="n">Call</span> <span class="n">GMFSetTileStringValue</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_background_image&quot;</span> <span class="s2">&quot;filename&quot;</span> <span class="p">(</span><span class="s2">&quot;Menus\Birthsign\Birthsign_&quot;</span> <span class="o">+</span> <span class="n">sBirthsign</span> <span class="o">+</span> <span class="s2">&quot;.dds&quot;</span><span class="p">)</span>

        <span class="p">;;</span> <span class="n">Populate</span> <span class="n">List</span>
        <span class="n">Let</span> <span class="n">rFunction</span> <span class="o">:=</span> <span class="n">BMRSetListText</span>
        <span class="n">Call</span> <span class="n">GMFInsertArrayList</span> <span class="s2">&quot;bmr_background</span><span class="se">\b</span><span class="s2">mr_info_box</span><span class="se">\b</span><span class="s2">mr_info_list_box&quot;</span> <span class="s2">&quot;bmr_list_template&quot;</span> <span class="n">aBirthsigns</span> <span class="n">rFunction</span>
        <span class="n">Let</span> <span class="n">rFunction</span> <span class="o">:=</span> <span class="n">BMRHandlerFunction</span>
        <span class="n">Call</span> <span class="n">GMFSetOnClickByIDHandler</span> <span class="n">rFunction</span> <span class="mi">200</span>

        <span class="p">;;</span> <span class="n">WARN</span><span class="p">:</span> <span class="n">Remember</span> <span class="n">to</span> <span class="n">destruct</span> <span class="n">strings</span>
        <span class="n">sv_Destruct</span> <span class="n">sBirthsign</span>
<span class="n">End</span>
</pre></div>
</div>
<p>Since we want to interact with only a specific ID, we need to use <code class="docutils literal notranslate"><span class="pre">GMFSetOnClickByIdHandler</span></code>,
using 200 for the ID since that’s what we set the list item’s IDs to. For any click (or enter key),
this function will be called. For the function that’s called:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>scn BMRHandlerFunction
int iMenuType
string_var sTile
int iID
string_var hBirthsign
ref rBirthsign
string_var sBirthsign
Begin Function {iMenuType, sTile, iID}

        ;; Grab stored hex, trim, get form from hex value, and return reference
        Let hBirthsign := Call GMFGetTileStringValue (sTile + &quot;\data\&quot;) &quot;_signhex&quot;
        Let hBirthsign := hBirthsign[2:-1]
        Let rBirthsign := GetFormFromMod &quot;Oblivion.esm&quot; $hBirthsign

        ;; Set current player class, class image, and class name
        SetPlayerBirthSign rBirthsign
        Let sBirthsign := GetName rBirthsign
        Call GMFSetTileStringValue &quot;bmr_background\bmr_class_name&quot; &quot;string&quot; (&quot;Current class: &quot; + sBirthsign)
        Call GMFSetTileStringValue &quot;bmr_background\bmr_background_image&quot; &quot;filename&quot; (&quot;Menus\Birthsign\Birthsign_&quot; + sBirthsign + &quot;.dds&quot;)
End
</pre></div>
</div>
<p>First we grab the hexadecimal string we stored. Remember how this is a hexadecimal string? Well we
can simply trim out the first 2 characters with a substring. If you’ve never seen substringing that
has slicing it can seem confusing, but essentially we are accessing characters <code class="docutils literal notranslate"><span class="pre">from:to</span></code>. In this
case starting from the index 2 (inclusive) to -1 (representing to the end).</p>
<p><code class="docutils literal notranslate"><span class="pre">GetFormFromMod</span></code> requires the plugin name and a hexadecimal form as a string, which gets returned
as a normal EditorID. And then, since we have a reference we can do everything else we need!</p>
<ul class="simple">
<li><p>Set the player’s birthsign</p></li>
<li><p>Set current class name</p></li>
<li><p>Set current class image</p></li>
</ul>
<p>That was a lot of work, but now you have a functioning menu.</p>
</section>
</section>
</section>
<section id="finishing-up">
<h2>Finishing Up<a class="headerlink" href="#finishing-up" title="Permalink to this heading"></a></h2>
<p>We have a functioning menu, but we aren’t actually done just yet. You may have tried to close the
menu, only to realize that we can’t. But this is a bit simple to add, so lets do it.</p>
<div class="highlight-Xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_class_name&quot;</span><span class="nt">&gt;</span>
<span class="cm">&lt;!--...--&gt;</span>
<span class="nt">&lt;/text&gt;</span>

<span class="nt">&lt;image</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_class_return_button&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;button_long.xml&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;depth&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/depth&gt;</span>
<span class="w">        </span><span class="nt">&lt;id&gt;</span><span class="w"> </span>112<span class="w"> </span><span class="nt">&lt;/id&gt;</span>
<span class="w">        </span><span class="nt">&lt;x&gt;</span><span class="w"> </span>50<span class="w"> </span><span class="nt">&lt;/x&gt;</span>
<span class="w">        </span><span class="nt">&lt;y&gt;</span><span class="w"> </span>25<span class="w"> </span><span class="nt">&lt;/y&gt;</span>
<span class="w">        </span><span class="nt">&lt;clicksound&gt;</span><span class="w"> </span>2<span class="w"> </span><span class="nt">&lt;/clicksound&gt;</span>
<span class="w">        </span><span class="nt">&lt;user0&gt;</span><span class="w"> </span><span class="nt">&lt;copy</span><span class="w"> </span><span class="na">src=</span><span class="s">&quot;strings()&quot;</span><span class="w"> </span><span class="na">trait=</span><span class="s">&quot;_return&quot;</span><span class="nt">/&gt;</span><span class="w"> </span><span class="nt">&lt;/user0&gt;</span>
<span class="w">        </span><span class="nt">&lt;user2&gt;</span><span class="w"> </span>3<span class="w"> </span><span class="nt">&lt;/user2&gt;</span>
<span class="nt">&lt;/image&gt;</span>

<span class="nt">&lt;rect</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bmr_info_box&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="cm">&lt;!--...--&gt;</span>
<span class="nt">&lt;/rect&gt;</span>
</pre></div>
</div>
<p>Thankfully there’s not much, since this is a readily used feature by all vanilla menus. We do use
inserted <code class="docutils literal notranslate"><span class="pre">_return</span></code> value instead of hardcoding it. This is useful for localization.</p>
<p>How does this work though? The function <code class="docutils literal notranslate"><span class="pre">GMFShowMenu</span></code> accepts a “close ID”, where if this ID is
clicked the menu will close. If 0 is passed, any ID will close the menu. So in this case, we just
need to change the value we were using in <code class="docutils literal notranslate"><span class="pre">BMRFunction</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scn</span> <span class="n">BMRFunction</span>
<span class="p">;;</span><span class="o">-------------------</span>
        <span class="p">;;</span> <span class="n">Create</span> <span class="n">menu</span> <span class="n">using</span> <span class="n">GMF</span>
        <span class="n">Call</span> <span class="n">GMFShowMenu</span> <span class="s2">&quot;kat</span><span class="se">\b</span><span class="s2">irthsignremake.xml&quot;</span> <span class="mi">112</span>
<span class="p">;;</span><span class="o">-------------------</span>
<span class="n">End</span>
</pre></div>
</div>
<figure class="align-center" id="id7">
<img alt="birthsign-menu-complete" src="../_images/birthsign-menu-complete.jpg" />
<figcaption>
<p><span class="caption-text">Note that since I’m using DarnifiedUI that the return button font is unaligned. This is a
byproduct of mixing UI prefabs. Vanilla only UI prefabs were used here for reproducability.</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Congrats you made a functioning menu. Many parts, but no complicated parts. And everything is pretty
easy to expand out.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Example Generic Menus" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Kat.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>